This folder contains modified versions of custom source.F90 files and a link to the custom-compiled dag-mcnp executable that uses a custom source.F90 file.
----------

From KIT (Germany): (originals are in vendor folder)
a) source_gamma_meshtal1.F90
b) source_gamma_meshtal2.F90

Adapted from KIT
c) source_gamma_meshtal2_ergbins.F90
d) source_gamma_meshtal2_alias.F90

Custom-compiled dag-mcnp/mcnp5 executable
e) mcnp5p

More information about each file:
a) Not used (uses RDUM and IDUm cards in MCNP; have not tried to get this working)
b) Original was modified from 24 energy groups to 42 groups and to use dynamic array allocation for the phtn source information. The file it looks for is called 'gammas'
c) Modifications to read in another line from the 'gammas_ener' file (note different name). This additional line contains the energy bin values, starting from 0.0, and increasing to maximum energy of interest.
d) Modifications to read a different format gammas file so that an alias table is used to chose the photon energy.  This is an experiment to see if this provides better/worse execution speed.
e) You must be in the svn-dagmc group to access the modified executable.  The executable is currently compiled with file b) above.

------
One should be able to use the mcnp5p link for running problems.
Alternately, to use one of these in a custom compile of MCNP/DAG-MCNP, one can link the files in the repository to the
DAG-MCNP/5.1.51/trunk/Source/src folder like this:
ln -s *path to this folder*/source_gamma_meshtal2.F90 source.F90

(or you could copy the file to that folder, but it won't get updated when changes happen in the repository)

To *compile* MCNP/DAG-MCNP:

We call the build scripts from within the /5.1.51/trunk/Source folder.
Since we are using some custom code, the .o files are in the way... use realclean (But this also gives an error so we build twice...); do the following two commands:
1:
>> ../scripts/build_dagmc realclean
<< error messages...
2:
>> ../scripts/build_dagmc
<< Success!

You can now call the mcnp5 executable in Source/src.

You can make it easy to call my using an alias command in your .bashrc file, e.g.
alias mcnp5p='$HOME/DAG-MCNP/5.1.51/trunk/Source/src/mcnp5'
----

